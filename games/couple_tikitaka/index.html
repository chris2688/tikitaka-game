
<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
<title>ë„ˆì™€ ë‚˜ì˜ TIKI TAKA</title>
<link href="assets/favicon.ico" rel="icon" type="image/x-icon"/>
<style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: url('assets/background.jpg') center/cover no-repeat;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      color: white;
    }
    h1 {
  font-size: clamp(32px, 5vw, 64px);
  margin-bottom: 60px;
}
    #startText {
   font-size: 20px;
  font-weight: 600;
  margin-bottom: 20px;
  padding: 16px 24px;
  background-color: rgba(0, 0, 0, 0.5);
  color: white;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  max-width: 90%;
  word-break: keep-all;
  white-space: normal;
  line-height: 1.8;
  display: inline-block;
}
    #nameForm, #startPrompt, #questionBox, #finalResult {
      display: none;
    }
.button {
  background-color: #88f5e1;
  color: black;
  border: none;
  padding: 12px 24px;
  font-size: 16px; /* âœ… 16px ì´ìƒ: ëª¨ë°”ì¼ ì¤Œ ë°©ì§€ */
  border-radius: 6px;
  cursor: pointer;
  margin: 6px 10px;
  word-break: keep-all;
  white-space: nowrap;
  min-width: 120px;
  max-width: 200px;

  /* âœ… ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™” */
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%;
}
input {
  padding: 12px;
  font-size: 16px; /* âœ… 16px ì´ìƒìœ¼ë¡œ ìœ ì§€ (ì¤Œ ë°©ì§€ìš©) */
  margin: 10px;
  border-radius: 6px;
  border: none;
  width: 180px;
  box-sizing: border-box;

  /* âœ… ëª¨ë°”ì¼ ì¤Œ ë°©ì§€ */
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%;
}
    #question {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    #result {
      font-size: 32px;
      font-weight: bold;
    }
.result-box h2,
.result-box p {
  word-break: keep-all;     /* ë‹¨ì–´ ë‹¨ìœ„ ì¤„ë°”ê¿ˆ */
  white-space: normal;      /* ê°•ì œ ì¤„ë°”ê¿ˆ ê°€ëŠ¥í•˜ê²Œ */
  text-align: center;
  line-height: 1.6;
  font-size: clamp(18px, 4vw, 24px); /* PCì—ì„œë„ ê³¼ë„í•˜ê²Œ ì»¤ì§€ì§€ ì•Šë„ë¡ */
}
.result-box {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
    
.small-btn {
  padding: 8px 16px;
  font-size: 14px;
  min-width: 100px;
  max-width: 140px;
}

.question-box {
  background-color: rgba(255, 255, 255, 0.85);
  border-radius: 16px;
  padding: 24px 16px;
  color: #111;
  width: 100%;
  max-width: 960px; /* ğŸ’¡ PCì—ì„œë„ ë„‰ë„‰í•œ ë„ˆë¹„ í—ˆìš© */
  margin: 0 auto 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  min-height: 140px;
  line-height: 1.6;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.icon-button {
  margin: 0 4px;
  padding: 4px;
  background-color: transparent;
  border: none;
  box-shadow: none;
}

.icon-button:hover {
  background-color: rgba(255,255,255,0.2);
  border-radius: 10px;
}

.icon-button img {
  display: block;
  margin: 0 auto;
  height: 24px;
  width: auto;
  max-width: 24px;
  max-height: 24px;
}
    
#background {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  background: url('assets/background.jpg') center/cover no-repeat;
  z-index: -1;

  /* ğŸ’¡ ì¤Œ ë°©ì§€ì™€ ë Œë”ë§ ì•ˆì •í™” */
  will-change: transform;
  backface-visibility: hidden;
  -webkit-transform: translateZ(0); /* Safari ë³´ì™„ */
  transform: scale(1) !important;   /* âœ… ì¤Œ ì´ˆê¸°í™” ê°•ì œ ì ìš© */
}

#progressBarContainer {
  width: 100%;
  max-width: 640px;
  height: 10px;
  background-color: rgba(255, 255, 255, 0.3);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 16px;
}

#progressBar {
  height: 100%;
  width: 0%;
  background-color: #88f5e1;
  transition: width 0.3s ease;
}

input,
button,
textarea {
  font-size: 16px; /* ì ˆëŒ€ 16px ì´ìƒ */
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%; /* iOS ëŒ€ì‘ */
}


html, body {
  overscroll-behavior: none;
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  font-size: 16px;
}

input, button, textarea {
  font-size: 16px !important;
  -webkit-text-size-adjust: 100%;
  touch-action: manipulation;
}

body {
  transform: scale(1) !important;
  transform-origin: top left;
}

@media (max-width: 480px) {
  .question-box p {
    font-size: clamp(24px, 7vw, 36px);
  }
}

@media (min-width: 768px) {
  .question-box {
    max-width: 640px;
    padding: 24px 32px; /* â† ì—¬ë°± ì¡°ì ˆ */
  }
}

@media (max-width: 480px) {
  .question-summary {
    font-size: 15px;
    padding: 16px;
  }
}

@media (min-width: 768px) {
  .question-summary-box {
    max-width: 640px;
  }
}
@media (max-width: 480px) {
  .icon-button img {
    height: 20px;
    max-height: 20px;
  }
}
@media (max-width: 480px) {
  .icon-button-wrapper {
    margin-right: -20px !important;
  }
}
    
#customPopup {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

#popupBox {
  background-color: white;
  padding: 24px 32px;
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  text-align: center;
  max-width: 90%;
  font-size: 18px;
  color: #333;
}

#popupBox button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 16px;
  background-color: #88f5e1;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.result-box {
  background-color: rgba(255,255,255,0.7);
  padding: 24px 20px;
  border-radius: 16px;
  margin: 0 auto;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  width: 90%;
  max-width: 100%;
  box-sizing: border-box;
}

@media (min-width: 768px) {
  .result-box {
    max-width: 640px; /* PCì—ì„œ ë„“ì´ ì œí•œ */
    padding: 32px;     /* ì—¬ë°± ì¡°ê¸ˆ ë” ì£¼ê¸° */
  }
}

.share-button:hover {
  background-color: #66e0cb;
}

.share-button {
  padding: 10px 16px; /* ì¢€ ë” ì—¬ìœ ë¡­ê²Œ */
  font-size: 16px;
}
    
  </style>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<body>
<div id="background"></div>
<h1>ë„ˆì™€ ë‚˜ì˜ TIKI TAKA</h1>
<div id="nameForm">
<input id="player1Name" placeholder="ë‹¹ì‹ ì˜ ì´ë¦„"/>
<input id="player2Name" placeholder="ì˜†ì‚¬ëŒì˜ ì´ë¦„"/>
<button class="button" onclick="saveNames()">ì…ë ¥ ì™„ë£Œ</button>
</div>
<div id="startPrompt">
<p id="startText"></p>
<button class="button" id="startGameBtn" onclick="startGame()">ë‚˜ ë¨¼ì € ì‹œì‘í• ê²Œ!</button>
</div>
<div id="questionBox">
<div id="progressBarContainer">
<div id="progressBar"></div>
</div>
<div id="question"></div>
<button class="button choice-button" id="btn1" onclick="">ì„ íƒ 1</button>
<button class="button choice-button" id="btn2" onclick="">ì„ íƒ 2</button>
<div id="result"></div>
</div>
<div id="finalResult"></div>
<div id="customPopup" style="display: none;">
<div id="popupBox">
<p id="popupMessage">ì§ˆë¬¸ë‹µë³€ë„ í•¨ê»˜ ì €ì¥í• ê¹Œìš”?</p>
<div style="margin-top: 20px;">
<button onclick="downloadAnswers()" style="margin-right: 10px;">ì˜ˆ</button>
<button onclick="closePopup()">ì•„ë‹ˆì˜¤</button>
</div>
</div>
</div>
<script>
    const questions = [
      "ë¨¼ì € ì‚¬ê³¼í•˜ëŠ” ì‚¬ëŒì€?",
      "ë°ì´íŠ¸ ì¥ì†Œë¥¼ ë”<br>ìì£¼ ì •í•˜ëŠ” ì‚¬ëŒì€?",
      "ì—°ë½ì„ ë” ìì£¼ í•˜ëŠ” ì‚¬ëŒì€?",
      "ë” ì§ˆíˆ¬ê°€ ë§ì€ ì‚¬ëŒì€?",
      "ì ë“¤ê¸° ì „ì— ë§ˆì§€ë§‰ìœ¼ë¡œ<br>ë©”ì‹œì§€ ë³´ë‚´ëŠ” ì‚¬ëŒì€?",
      "ì˜í™”ë¥¼ ë³¼ ë•Œ ë” ë¨¼ì € <br>ìš¸ì»¥í•˜ëŠ” ì‚¬ëŒì€?",
      "ë” ì˜¤ë˜ ì—°ë½ì´ ì•ˆ ë˜ë©´ <br>ì„œìš´í•´í•˜ëŠ” ì‚¬ëŒì€?",
      "ë” ìì£¼ ì›ƒê²Œ <br>ë§Œë“¤ì–´ì£¼ëŠ” ì‚¬ëŒì€?",
      "í•¨ê»˜ ìˆì„ ë•Œ ë” <br>í¸ì•ˆí•¨ì„ ëŠë¼ëŠ” ì‚¬ëŒì€?",
      "ë¨¼ì € 'ì‚¬ë‘í•´'ë¼ê³  <br>ë§í•˜ëŠ” ì‚¬ëŒì€?"
    ];
    const totalQuestions = questions?.length || 10;

    const endings = [
      "ìš°ë¦¬ì˜ í‹°í‚¤íƒ€ì¹´ ë©‹ì¡Œì–´ìš”!<br>ì°°ë–¡ê¶í•© ì»¤í”Œì´ë„¤ìš”!",
      "ì´ ì •ë„ë©´ ìš´ëª… ì•„ë‹ê¹Œìš”? ğŸ’˜",
      "ë‘ ë¶„,<br>í‹°í‚¤íƒ€ì¹´ ì±”í”¼ì–¸ì…ë‹ˆë‹¤!",
      "ì™„ë²½ ê·¸ ìì²´!",
      "ì´ëŸ° ê³µê°, í”ì¹˜ ì•Šì•„ìš”~!"
    ];

let p1 = "", p2 = "";
let roundNumber = 1;
let isFirst = true, index = 0;
let firstAnswers = [], secondAnswers = [], score = 0;
let selectedQuestions = [];

    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("nameForm").style.display = "block";
    });

function saveNames() {
  p1 = document.getElementById("player1Name").value.trim();
  p2 = document.getElementById("player2Name").value.trim();
  if (!p1 || !p2) return showAlertPopup("ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");

  console.log("í”Œë ˆì´ì–´ ì´ë¦„ ì €ì¥ë¨:", p1, p2);

  // âœ… ì´ë¦„ì„ ìˆ¨ê²¨ì§„ inputì—ë„ ì €ì¥
  document.getElementById("hiddenP1").value = p1;
  document.getElementById("hiddenP2").value = p2;

  document.getElementById("nameForm").style.display = "none";
  document.getElementById("startPrompt").style.display = "block";
  document.getElementById("startText").innerHTML = 
  `<span style="color:#88f5e1; font-weight:bold;">${p1}</span>ë‹˜ë¶€í„° <strong>TIKI</strong>ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.`;
}

    function startExtraRound() {
  isFirst = true;
  roundNumber++;
  index = 0;
        if (selectedQuestions.length >= questions.length) {
  alert("ë” ì´ìƒ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤!");
  return;
}

  const remaining = questions.filter(q => !selectedQuestions.includes(q));
  const nextSetCount = Math.min(5, remaining.length);
  const nextSet = remaining.sort(() => Math.random() - 0.5).slice(0, nextSetCount);
  selectedQuestions.push(...nextSet);

  document.getElementById("finalResult").style.display = "none";
  document.getElementById("startPrompt").style.display = "block";
  document.getElementById("startText").innerHTML = 
    `<span style="color:#88f5e1; font-weight:bold;">${p1}</span>ë‹˜ë¶€í„° <strong>TIKI</strong>ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.`;

  const oldStartBtn = document.getElementById("startGameBtn");
  if (oldStartBtn) oldStartBtn.remove();
  const oldTakabBtn = document.getElementById("beginTAKABtn");
  if (oldTakabBtn) oldTakabBtn.remove();

  const newStartBtn = document.createElement("button");
  newStartBtn.innerText = "ë‚˜ ë¨¼ì € ì‹œì‘í• ê²Œ!";
  newStartBtn.className = "button";
  newStartBtn.id = "startGameBtn";
  newStartBtn.onclick = () => {
    document.getElementById("startPrompt").style.display = "none";
    document.getElementById("questionBox").style.display = "block";
    showQuestion();
    document.getElementById('btn1').disabled = false;
    document.getElementById('btn2').disabled = false;
  };
  document.getElementById("startPrompt").appendChild(newStartBtn);
}

function captureResult() {
  alert("ê³µìœ í•˜ê¸° ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!");
}
    
    function startGame() {
  p1 = document.getElementById("player1Name").value.trim();
  p2 = document.getElementById("player2Name").value.trim();

          if (!p1 || !p2) {
    showAlertPopup("ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
    return;
  }
        
    selectedQuestions = [...questions]
    .sort(() => Math.random() - 0.5)
    .slice(0, 5);

  document.getElementById("startPrompt").style.display = "none";
  document.getElementById("questionBox").style.display = "block";
  showQuestion();
    document.getElementById('btn1').disabled = false;
    document.getElementById('btn2').disabled = false;
}
function showQuestion() {
  const questionEl = document.getElementById("question");
  questionEl.className = "question-box";

  // âœ… ë¼ìš´ë“œ ë²ˆí˜¸ ë° í˜„ì¬ ì§ˆë¬¸ ë²ˆí˜¸ ê³„ì‚°
const questionsPerRound = 5;
const player1Count = firstAnswers.length;
const completedRounds = Math.floor(player1Count / questionsPerRound);
const currentRound = completedRounds + 1;
const currentQuestionNumber = completedRounds * questionsPerRound + index + 1;
const totalCount = selectedQuestions.length * ((firstAnswers.length + secondAnswers.length) / selectedQuestions.length);
const phaseLabel = isFirst ? "TIKI ì§ˆë¬¸" : "TAKA ì§ˆë¬¸";

  // âœ… ì§ˆë¬¸ í…ìŠ¤íŠ¸ ë Œë”ë§
  questionEl.innerHTML = `
  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
   <h2 style="margin: 0; font-size: 18px; color: #003344;">
  ${phaseLabel} <span style="font-size: 14px; color: #666;">(${currentQuestionNumber} / ${questionsPerRound * currentRound})</span>
</h2>
    <div style="font-size: 14px; color: #666; font-weight: bold;">${currentRound}ë¼ìš´ë“œ</div>
  </div>
    <p style="
      font-size: clamp(28px, 6.5vw, 42px); 
      font-weight: bold; 
      margin: 16px 0 0 0; 
      text-align: center; 
      padding: 0 8px;
    ">${selectedQuestions[index]}</p>
  `;

  // âœ… í”„ë¡œê·¸ë ˆìŠ¤ë°” ê°±ì‹ 
  const progressPercent = Math.round((totalAnswered / questions.length) * 100);
  document.getElementById("progressBar").style.width = `${progressPercent}%`;

  // âœ… ë²„íŠ¼ í…ìŠ¤íŠ¸ ë° ë™ì‘ ì„¤ì •
  const btn1 = document.getElementById("btn1");
  const btn2 = document.getElementById("btn2");

btn1.innerText = p1;
btn2.innerText = p2;
btn1.onclick = () => choose(p1);
btn2.onclick = () => choose(p2);
btn1.disabled = false;
btn2.disabled = false;

  document.getElementById("result").innerText = "";
}

   function choose(choice) {
  const btn1 = document.getElementById("btn1");
  const btn2 = document.getElementById("btn2");

  // ğŸ”’ í´ë¦­ í›„ ë²„íŠ¼ ì ê¸ˆ
  btn1.disabled = true;
  btn2.disabled = true;

  if (isFirst) {
    firstAnswers.push(choice);
    index++;
    if (index < 5) {
      showQuestion();
    document.getElementById('btn1').disabled = false;
    document.getElementById('btn2').disabled = false;
      // ğŸ”“ ë‹¤ì‹œ í™œì„±í™”
      btn1.disabled = false;
      btn2.disabled = false;
} else {
  isFirst = false;
  index = 0;

  // ì§ˆë¬¸ ì˜ì—­ ìˆ¨ê¸°ê³ , ì‹œì‘ í”„ë¡¬í”„íŠ¸ ë³´ì—¬ì£¼ê¸°
  document.getElementById("questionBox").style.display = "none";
  document.getElementById("startPrompt").style.display = "block";

  // ë©”ì‹œì§€ ë³€ê²½
  document.getElementById("startText").innerHTML =
    `ì´ì   <span style="color:#ffde74; font-weight:bold;">${p2}</span>ë‹˜ ì°¨ë¡€ì˜ˆìš”.<br>ì„œë¡œì˜ ë§ˆìŒì„ ë§ì¶°ë´ìš”.`;

  // âœ… ê¸°ì¡´ ë²„íŠ¼ ì œê±° (idê°€ ë¶™ì€ ë²„íŠ¼ë§Œ ì •í™•íˆ ì œê±°)
  const oldStartBtn = document.getElementById("startGameBtn");
  if (oldStartBtn) oldStartBtn.remove();

  const oldTakabBtn = document.getElementById("beginTAKABtn");
  if (oldTakabBtn) oldTakabBtn.remove();

  // âœ… ìƒˆë¡œìš´ ë²„íŠ¼ ìƒì„±
  const btn = document.createElement("button");
  btn.innerText = "ì´ì   ë‚´ê°€ TAKA í•´ ë³¼ê²Œ!";
  btn.className = "button";
  btn.id = "beginTAKABtn";

  btn.onclick = () => {
    document.getElementById("startPrompt").style.display = "none";
    document.getElementById("questionBox").style.display = "block";

    showQuestion();
    document.getElementById('btn1').disabled = false;
    document.getElementById('btn2').disabled = false;

    // â— ì„ íƒ ë²„íŠ¼ ì¬í™œì„±í™”
    document.getElementById("btn1").disabled = false;
    document.getElementById("btn2").disabled = false;
  };

  document.getElementById("startPrompt").appendChild(btn);
}
  } else {
    secondAnswers.push(choice);
    let match = choice === firstAnswers[index];
    if (match) score++;
    const resultBox = document.getElementById("result");
resultBox.innerHTML = `
  <div style="
    display: inline-block;
    background-color: ${match ? 'rgba(136, 245, 225, 0.85)' : 'rgba(255, 120, 120, 0.85)'};
    border: 2px solid white;
    border-radius: 12px;
    padding: 12px 20px;
    font-size: 24px;
    font-weight: bold;
    color: ${match ? '#003344' : '#400000'};
    margin-top: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  ">
    ${match ? "â­• í‹°í‚¤íƒ€ì¹´!" : "âŒ í‹°í‚¤íƒ€ì¹´"}
  </div>
`;
    index++;
    if (index < 5) {
      setTimeout(() => {
        showQuestion();
    document.getElementById('btn1').disabled = false;
    document.getElementById('btn2').disabled = false;
        document.getElementById('btn1').disabled = false;
        document.getElementById('btn2').disabled = false;
        // ğŸ”“ ë‹¤ìŒ ì§ˆë¬¸ ë‚˜ì˜¤ë©´ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
        btn1.disabled = false;
        btn2.disabled = false;
      }, 1500); // 1.5ì´ˆ ëŒ€ê¸°
    } else {
      setTimeout(() => {
document.getElementById("questionBox").style.display = "none";
const ending = endings[Math.floor(Math.random() * endings.length)];
const total = firstAnswers.length;
const percentage = Math.round((score / total) * 100);// ì„±ê³µë¥  ê³„ì‚°

let answerListHTML = "<ul style='list-style:none; padding:0; text-align:left;'>";

for (let i = 0; i < total; i++) {
  const questionText = selectedQuestions[i].replace(/<br>/g, ' ');
  const match = firstAnswers[i] === secondAnswers[i];
  const icon = match ? "â­•" : "âŒ";

answerListHTML += `
  <li style="margin-bottom: 20px;">
    <div style="line-height: 1.6; font-size: 16px;">
      <strong>Q${i + 1}.</strong> ${questionText}
    </div>
    <div style="margin-top: 4px;">Â· ${p1}: ${firstAnswers[i]}</div>
    <div style="margin-top: 4px;">Â· ${p2}: ${secondAnswers[i]}</div>
    <div style="margin-top: 4px;">
      Â· ê²°ê³¼: 
      <span style="color: #e53935; font-weight: bold;">${icon}</span>
      ${
        match
          ? '<span style="color: #00bfa5; font-weight: bold;"> TIKI TAKA</span>'
          : '<span style="color: #000; font-weight: bold;"> ë¶ˆì¼ì¹˜</span>'
      }
    </div>
  </li>
`;
}
answerListHTML += "</ul>";

document.getElementById("finalResult").innerHTML = `
<div class="result-box" id="resultSummaryBox">
    <h2 style="font-size: 28px; color: #000; line-height: 1.6;">
      ${p1} â¤ï¸${p2}<br>TIKI TAKA ê²°ê³¼
    </h2>
    <p style="margin-top: 10px; font-size: 20px; color: #000;">
      ì´ ${total}ë¬¸ì œ ì¤‘ <strong>${score}ê°œ</strong> ì¼ì¹˜<br>
      í‹°í‚¤íƒ€ì¹´ ì„±ê³µë¥ :
      <span style="
        display: inline-block;
        font-size: 42px;
        font-weight: 900;
        color: #00bfa5;
        text-shadow:
          -1px -1px 0 #ffffff,
           1px -1px 0 #ffffff,
          -1px  1px 0 #ffffff,
           1px  1px 0 #ffffff;">
        ${percentage}%
      </span>
    </p>

    <p style="
  font-size: clamp(18px, 4vw, 24px);
  font-weight: bold;
  color: #222;
  line-height: 1.6;
  margin-top: 20px;
  word-break: keep-all;
  white-space: normal;
  text-align: center;
">
      ${ending}
    </p>

<div style="margin-top: 40px; display: flex; justify-content: center; gap: 8px; flex-wrap: nowrap; flex-direction: row;">
  <button class="button small-btn icon-button" onclick="location.reload()" aria-label="ë‹¤ì‹œí•˜ê¸°">
    <img src="assets/icon_1.png" alt="ë‹¤ì‹œí•˜ê¸°" style="height: 24px;">
  </button>
  <button class="button small-btn icon-button" onclick="startExtraRound()" aria-label="ê³„ì†í•˜ê¸°">
    <img src="assets/icon_2.png" alt="ê³„ì†í•˜ê¸°" style="height: 24px;">
  </button>
  <button class="button small-btn icon-button" onclick="captureResult()" aria-label="ê³µìœ í•˜ê¸°">
    <img src="assets/icon_3.png" alt="ê³µìœ í•˜ê¸°" style="height: 24px;">
  </button>
</div>
  </div>

  <!-- âœ… ì§ˆë¬¸ ì •ë¦¬ ë°•ìŠ¤ ë¶„ë¦¬ -->
<div style="
  margin: 32px auto 0;
  padding: 24px 20px; /* ê²°ê³¼ ë°•ìŠ¤ì™€ ë™ì¼í•œ padding */
  background-color: rgba(255,255,255,1);
  border-radius: 16px; /* ê²°ê³¼ ë°•ìŠ¤ì™€ ë™ì¼í•œ radius */
  color: #111;
  text-align: left;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2); /* ê²°ê³¼ ë°•ìŠ¤ì™€ ë™ì¼í•œ ê·¸ë¦¼ì */
  font-size: 16px;
  width: 90%;
  max-width: 100%;  /* ê²°ê³¼ ë°•ìŠ¤ì™€ ë™ì¼ */
  box-sizing: border-box; /* ê²°ê³¼ ë°•ìŠ¤ì™€ ë™ì¼ */
">
   <div id="answerSummaryBox" style="padding: 24px 20px; background: white; border-radius: 16px;">
    <h3 style="color: #000; font-size: 20px; margin-bottom: 16px;">ğŸ“‹ ì§ˆë¬¸ & ë‹µë³€ ì •ë¦¬</h3>
    ${answerListHTML}
  </div>
  </div>
`; 
document.getElementById("finalResult").style.display = "block";
      }, 1500); // â† ì—¬ìœ  ì‹œê°„ ì£¼ê³  ê²°ê³¼ì°½ ë„ìš°ê¸°
    }
  }
 }
     function showPopup(message) {
  document.getElementById("popupMessage").innerText = message;
  document.getElementById("customPopup").style.display = "flex";
}


    
function closePopup() {
  document.getElementById("customPopup").style.display = "none";
}


function captureAnswers() {
  const target = document.getElementById("answerSummaryBox");
  html2canvas(target, {
    scrollY: -window.scrollY
  }).then(canvas => {
    const link = document.createElement('a');
    link.download = 'í‹°í‚¤íƒ€ì¹´_ë‹µë³€ì •ë¦¬.png';
    link.href = canvas.toDataURL();
    link.click();
  });
}

function captureResult() {
  const resultTarget = document.querySelector('.result-box');

  html2canvas(resultTarget, {
    backgroundColor: null,
    scrollY: -window.scrollY
  }).then(canvas1 => {
    const link1 = document.createElement('a');
    link1.download = 'í‹°í‚¤íƒ€ì¹´_ê²°ê³¼.png';
    link1.href = canvas1.toDataURL();
    link1.click();

    // ê²°ê³¼ ì €ì¥ í›„ ì§ˆë¬¸ë‹µë³€ë„ í•¨ê»˜ ì €ì¥í• ì§€ ë¬»ëŠ” íŒì—… ë„ìš°ê¸°
    document.getElementById("popupMessage").innerText = "ì§ˆë¬¸ë‹µë³€ë„ í•¨ê»˜ ì €ì¥í• ê¹Œìš”?";
    document.getElementById("customPopup").style.display = "flex";
  });
}

    
function downloadAnswers() {
  const answerTarget = document.getElementById('answerSummaryBox');

  html2canvas(answerTarget, {
    backgroundColor: null,
    scrollY: -window.scrollY
  }).then(canvas => {
    const link = document.createElement('a');
    link.download = 'í‹°í‚¤íƒ€ì¹´_ë‹µë³€ì •ë¦¬.png';
    link.href = canvas.toDataURL();
    link.click();

    
    closePopup();
  });
}
function closePopup() {
  document.getElementById("customPopup").style.display = "none";
}
document.addEventListener("keydown", function (e) {
  if (e.key === "Escape") {
    closeAlertPopup(); // í™•ì¸ìš© íŒì—… ë‹«ê¸°
    closePopup();      // ì˜ˆ/ì•„ë‹ˆìš” íŒì—… ë‹«ê¸°
  }
});
    
document.addEventListener("DOMContentLoaded", function () {
  document.getElementById("nameForm").style.display = "block";
});

function showAlertPopup(message) {
  document.getElementById("alertPopupMessage").innerText = message;
  document.getElementById("alertPopup").style.display = "flex";
}

function closeAlertPopup() {
  document.getElementById("alertPopup").style.display = "none";
}

    
</script>
<div id="alertPopup" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.4); z-index: 9999; justify-content: center; align-items: center;">
<div style="background: white; padding: 24px 32px; border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.3); color: #333; max-width: 90%; text-align: center;">
<p id="alertPopupMessage" style="font-size: 18px;">ì•Œë¦¼ ë©”ì‹œì§€</p>
<button onclick="closeAlertPopup()" style="margin-top: 20px; padding: 10px 20px; font-size: 16px; background-color: #88f5e1; border: none; border-radius: 8px; cursor: pointer;">í™•ì¸</button>
</div>
</div>

<input type="hidden" id="hiddenP1" />
<input type="hidden" id="hiddenP2" />
    
</body>
</html>
